---
title: Decision making under uncertainty
author: Vlad Aluas
date: '2021-02-21'
slug: decision-making-under-uncertainty
categories: ["Opinion"]
tags: ["Monte Carlo", "decision making", "uncertainty", "chance"]
thumbnail: /images/chance-logo.png
draft: true
---

**Insert Lead paragraph here.**

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE, comment = "#>", collapse = FALSE, out.width = "100%")

library(tidyverse)
library(scales)
```

------------------------------------------------------------------------

People engage in decision making on a daily basis and although most of our decisions seem to derive from logical arguments, the truth is that exactly the opposite is true. Most of the decisions we make are due to [biases](https://en.wikipedia.org/wiki/List_of_cognitive_biases) and [heuristics](https://en.wikipedia.org/wiki/Heuristic) our minds have developed to respond to the environment around them faster.

These tendencies have been first described and studied by [Amos Tversky](https://en.wikipedia.org/wiki/Amos_Tversky) and [Daniel Kahneman](https://scholar.princeton.edu/kahneman/home) and have been explained in Kahneman's excellent book *Thinking fast and slow*. I highly recommend the book since it is an excellent guide in where our minds tend to be error prone and mislead us. I will explain in brief however that our minds operate as two separate system called by Kahneman and Tversky *system 1* and *system 2*.

*System 1* is the default system of the mind, the one used for everyday activities. These activities include walking, breathing, detecting danger and avoiding it, eating, doing routine activities, and all activities that do not involve heavy cognitive effort. *System 1* is emotional, automatic, fast and uses no extra energy from our energy hungry brains.

*System 2* is the exact opposite of *System 1*. It is rational, quite slow, and requires a large amount of energy and effort from our part. *System 2* allows you to analyse in detail every situation, however this is not always ideal. If a car would come speeding towards you, *System 2* would analyse the colour of the car, the brand and maybe the speed and approach vector, which is a nice thought exercise but might get hit by the car before *System 2* would act. *System 1* will not bother with all those details, it will just register car coming towards me with great speed, I need to move out of the way.

The problem when making decisions is that there are situations moderated or mediated by the aforementioned biases and heuristics in which *System 1* might make the decision and our minds might think it is actually *System 2*. Otherwise said, we might make decisions for subjective reasons and have a high degree of confidence in then believing they are objective.

In this article I would like to show some methods that can reduce these types of biases and help in engaging *System 2* in the decision making process.

# Distribution Types

I would like to start with some examples how some situations can seem similar on the surface and have massively different outcomes. This is one of the most common situations in which *System 1* makes the decision and we might not notice.

I would like to start with some examples as it is way easier. Let us say we are at a music festival (I know, I know...) together with 9,998 other people. We are lucky enough to have information about this crowd and we know that the average age is 24.5 years old. We also know that the average net income for the crowd is \$65K. With this information at our disposal we can play around with the impact of one person.

Firstly, I would like you to think of the oldest person you know. It does not have to be alive any more. What would happen if we were to add their age to the average? Since I cannot read your mind, I will jump in with the oldest person that pops to my mind, Methuselah at a respectable 969 years old. So, let's see the impact of Methuselah on the average age.

$$m_{age} = \frac{10,000 \times 24.5 + 969}{10,001} = `r (10000 * 24.5 + 969) / 10001`$$

Not much of an impact, is it?

Secondly, let us try the same impact for net worth. Think of the richest person you know and try to figure out what would their impact be on the crowd, how much will the average change?

I'm thinking of Elon Musk although at the time of writing this article he is worth a measly \$169B as opposed to Jeff Bezos' \$193B. I'm a fan of Musk so let's check with his net worth.

$$m_{net\_worth} = \frac{10,000 \times 65,000 + 169,000,000,000}{10,001} = \$16,963,304$$

Quite a difference, right? I'd say so.

This difference is because the two characteristics of the music enthusiasts population follow two different distribution types. The first example follows a normal distribution while the second one follows a power law distribution.

Some basic characteristics of population distribution will be essential in our analysis, so I will take a few moments to explain the two types of distribution I mentioned earlier, although a distribution can have many other variations.

## Normal Distribution

As mentioned above the age of the music enthusiasts is distributed [normally](https://en.wikipedia.org/wiki/Normal_distribution). A normal distribution is a phenomenon observed by [Carl Gauss](https://en.wikipedia.org/wiki/Carl_Friedrich_Gauss) and it can help us a lot in our analysis due to its [properties.](https://www.statisticshowto.com/probability-and-statistics/normal-distributions/)

A normal distribution means that most individuals in a population are close to the average and the further we go from the average the fewer individuals in the population. If we take height as an example, most people will be around average height in a population and the ones that are extremely tall or extremely short being a rarity. The more extreme the height (taller or shorter) the less likely to find someone with that height.

If a population has an average height of 1.75m (5.74 ft), you will have an easier time finding someone who is 1.9m (6.2 ft) than someone who is 2.13m (7 ft). Also the chances of finding someone who is 7km (4.3 mi) tall is virtually zero.

This is a good thing because it allows us to asses a population quite easy using a sample. Even if our estimates based on the sample are off, if the sample was not biased, we can be fairly certain that we will not be off by much.

Data that falls under a normal distribution are usually the ones that measure natural phenomena. They can include but not be limited to:

-   height
-   weight
-   age
-   reaction times
-   average time spent playing video games

## Power Law Distribution

The other effect we have observed is called a power law distribution, or for those who work in the financial sector a [Pareto Distribution](https://en.wikipedia.org/wiki/Pareto_distribution), and I think it is best know as the *80-20 rule* most commonly remembered as: "20% of the people control 80% of the assets."

This type of distribution can masquerade itself as a normal distribution but is not. It has a lot of dwarves and a few giants and that is why you cannot make any estimations using any of the normal distribution indicators. If you take a sample of dwarves you cannot estimate the impact of a giant.

Ignoring this fact is why we have a lot of people calling themselves actors, writers or singers and not what they actually do for a living, most likely bartenders, waiters or other job unrelated with their self-reported career.

## Distributions in Decision Making

Here is where it is important to know a bit about distributions.

If I were to propose a bet in which you are allowed to sample 100 people from the festival mentioned earlier and give some information about the population based on that sample, in which bets you would engage?

1.  Education level
2.  Number of cars owned
3.  Amount of beer drunk weekly

I would go for education level since it is highly unlikely someone has spent 50 years in education. And even if it is so, the impact to 10,000 will be small. The same goes for amount of beer drunk weekly. If there is someone who drinks thousands of beer weekly you might be in trouble, but not as much as they are. I think you would be safe with that bet.

But what about the amount of cars? Well, here it can get a bit tricky. Most people have one or two cars. But what happens if in the crowd is the Sultan of Brunei with a car collection of 7000 cars? Considering the low age of the crowd, it is possible that he owns more cars that the whole crowd put together. This would not be a problem if you can include him in the sample however a sample of 100 people out of 10,000 give you a chance of 1% to include him in it. This means that most 99 out of 100 times your sample will underestimate the average number of cars owned by the crowd.

This is why it is important to try and figure out what kind of distribution has the population to which you are trying to make a decision and adjust your decision making accordingly. In the following section I will describe a problem which would be interesting to solve, what career would be best if I were to choose again, and see how we can take advantage of these distributions.

# The problem

In the next section I would like to explain show in brief what would be my thought process if I were to choose a career once more and assuming that I have the knowledge I have now. 

First of all I would need to know what do I expect from a career, money, fame, free time, all of those? There can be multiple variables analysed here, however for the sake of simplicity I will keep it short and analyse just one. So, in this analysis the most important factor in choosing a career is how much income can this career generate during a person working life.

Now, what careers are on the short list?

1.    The first option would be doctor. This is a good option in my opinion as it is supposed to be well paid, and one can find work almost everywhere. Wherever there are people, there are sick people and a doctor will always be in demand. A medical career offers a lot of variety in both specialities and type of practice which is always good to have.
2.    The second career option would be one in IT. This is also rumoured to be well paid and besides that it can give one a lot of puzzles with which to play. I like challenges and spending time figuring out puzzles so this seems a good choice for me. As a bonus, any mistakes made as a programmer can be easily patched and fixed, and most mistakes made by programmers do not endanger anyone's life, as opposed to a doctor's mistake.
3.    The third option is one that is highly appealing because it can generate a lot of income with minimal effort. This is on the surface and it remains to be seen when we analyse the data. The career is poker player. I like the idea to create my own schedule and work when I want from where I want. It remains to be seen if this is such an appealing option as it seems at first.

How do we choose between these options?

# The method

Everything in nature is subject to variety so we will assume that the income will vary as based on different factors. Therefore we cannot generate a single number and say *"There! this is the expected income if you choose this career!"*.

As an example, if I were to choose to study medicine, I might have an ideea of what kind of doctor I want to be, however that does not guarantee that I will end up in that particular field. I might not like the field once I go into the nitty gritty of it, or I might like another field more once I find out more about it. Since I cannot control that I will try to simulate multiple outcomes and see overall which career is the best taking into account its highs and lows.

*E.g.:* If I were to choose between being a janitor who just won the lottery and being a doctor, I would chose to be the janitor. However, if I were to chose between the two and live 10,000 I would choose the doctor because the other 9,999 time it is the better outcome.

How do we do this?

We will gather data on each of the three career paths we have chosen and we will analyse it to try and figure out which are the main characteristics of the three populations, doctors, IT workers, and poker players. We will try to find out what is the average salary, how much does it usually vary from there, and if there is a tendency of most salaries to e over or under that average. Once we have all this information, we will extract a sample of that data of 10,000 randomly chosen salaries.

## Coding examples

In order to better asses the situation, I will use some code. The code is written in *R*, however it can be ignored completely if you do not want to bother with it. I will try my best to comment the code properly so you can follow even if you are not familiar with *R*. If you want to learn more about this particular programming language, I would recommend [R for Data Science](https://r4ds.had.co.nz/), a brilliant book that is the perfect starting place.

Let's start coding. At first I would like to set up the variables that I will use in this article. I will explain later why I use these values, however I will use them repetedly so I will like to set them up now avoid changing them later in multiple places.

```{r variables, include = FALSE}
# Medical Salaries
dr_sal_mean <- 21100

# IT Salaries
it_sal_med_high <- 225000 # Median Salary for Managers and Directors in IT
it_sal_med_low  <- 92809  # Median Salary for the everyone else working in IT 
```

Next I will like to write some custom function that will allow us to focus on the results, not on endless lines of code.

```{r functions, include = FALSE}
# Graphical function to avoid writing the same lines over and over
histogram <- function(.df){
  
  .df %>% 
    tibble() %>% 
    ggplot(aes(.)) +
    geom_histogram(colour = "white", fill = "#2484cc") +
    labs(x = "Income", y = "") +
    scale_x_continuous(labels = label_dollar(prefix = "€"))
}

# Just a simple function to format the Romanian currency so I can used stored variables.
ron_format <- function(.x){
  require(scales)
  
  dollar_format(prefix = "", suffix = " RON")(.x)
}
```

# The careers

In the next section I will describe each career, the variables that I will take into account and I will expose the code I will use to do so, if anyone wants to replicate it. The code is written in *R*.

## The Doctor (of the medicine not Who variety)

I all societies doctors are well respected and well paid. However, not all doctors are paid the same. We can assume that a neurosurgeon is paid better than a internist although not as well as a plastic surgeon.

I have found a data source that seems to have done a pretty good job in assessing the average salary for a doctor. The information was taken from the [salaryexplorer.com](http://www.salaryexplorer.com/salary-survey.php?loc=178&loctype=1&job=13&jobtype=2) website. The salary is expressed in the local currency of Romania (RON) and the salaries are expressed before tax. These two impediments are nothing too difficult as we can easily translate everything into Euro, and extract the taxes.

According to the National Bank of Romania, the conversion rate is 1 RON for 0.20 €.

In regards to the taxes, the Romanian government imposes taxes on the on the employee as follows:

-   Social Security: 25%
-   Health Insurance: 10%

The remaining 65% is considered income and that is taxed with 10%.

Let's start by extracting the taxes out of the average salary for doctors of `r ron_format(dr_sal_mean)`.

$$ m_{salary(RON)} = (`r dollar_format(prefix = "")(dr_sal_mean)` - \frac{25}{100} \times `r dollar_format(prefix = "")(dr_sal_mean)` - \frac{10}{100} \times `r dollar_format(prefix = "")(dr_sal_mean)`) \times \frac{90}{100} = `r dollar_format(prefix = "")(dr_sal_mean - 0.25 * dr_sal_mean - 0.1 * dr_sal_mean)` \times \frac{90}{100} = `r dollar_format(prefix = "")((dr_sal_mean - 0.25 * dr_sal_mean - 0.1 * dr_sal_mean) * 0.9)`$$

Now we can easily convert everything into Euro.

$$ m_{salary(€)}  =  `r dollar_format(prefix = "")((dr_sal_mean - 0.25 * dr_sal_mean - 0.1 * dr_sal_mean) * 0.9)` \times 0.2 = `r dollar_format(prefix = "")(((dr_sal_mean - 0.25 * dr_sal_mean - 0.1 * dr_sal_mean) * 0.9) * 0.2)`$$

With this in mind, our average income on a monthly basis, if we were to live 10000 times would be distributed something like this.

```{r dr_monthly_salary, message = FALSE}
dr_sal_euro <- ((dr_sal_mean - dr_sal_mean * 0.25 - dr_sal_mean * 0.1) * 0.9) * 0.2

dr_sal_dist <- rnorm(10000, mean = dr_sal_euro, sd = 600)

dr_sal_dist %>% 
   histogram() +
   labs(title = "Monthly Income Distribution",
        subtitle = "Medical Care Workers")
```

Now, we will just need to calculate for how long does a doctor work and some other costs of being a doctor. In Romania, medical school is usually 7 years, and you usually need to spend extra 3 to 5 years for residency, although that is usually paid so I think we can just include the 7 years of study. If you finish high-school at 19 and you spend 7 years in medical school, you can start working and 26.

If we want to retire at 65 and, that would give us 39 years of work or 468 months of works. So, all that we have to do is create a distribution with the mean salary after tax and multiply it by the number of months.

```{r dr_lifelong_salary, message = FALSE}
dr_sal_dist_total <- dr_sal_dist * 468

dr_sal_dist_total %>% 
   histogram() +
   labs(title = "Lifelong Income Distribution",
        subtitle = "Medical Care Workers")
  
```

Not bad, right?. Now let's see how much would someone in IT make.

## Part of the IT Crowd

Romania has one of the most active IT sectors in Eastern Europe and it is expanding continuously which is a good thing because one will not have problems ending up in an IT job if he wants to. We will just need some data on the salaries of the IT crowd. A beautiful analysis on 1,267 salaries can be seen [here](https://www.averagesalarysurvey.com/romania).

The sample is large enough to give us a good estimate of what the population actually looks like. We can see that the data is a bit skewed and slightly more people are just under the mean when it comes to income. This is due to the fact that managers and directors have very high salaries and they move the average up. This can be easily fixed, we just need to estimate what percentage of people working in IT are managers or directors and and account for that.

The first table gives us most of the information we need regarding the salary distribution in Romania. There we can see that most people, over 58% earn more than `r ron_format(it_sal_med_low)`. This is not exactly the median of the distribution however it is close enough so we will use this to approximate the shape of the distribution. The median is the value exactly in the middle of the distribution.

Once we have this, we will use it as an average value for a normal distribution that will contain most of the values in our population. This will be 85% percent of our lives, we will not be managers, therefore we will have salaries accordingly. In the rest of 15% of our 10,000 lives, we will be managers or directors so our salary will be accordingly.

```{r it_salary_distribution}
it_sal_low <- rnorm(8500, it_sal_med_low, 25000)
it_sal_high <- rnorm(1500, it_sal_med_high, 50000)

it_sal_dist <- c(it_sal_low, it_sal_high)

# We want to make sure the mean of our distribution if not far off from the actual distribution
mean(it_sal_dist)
```

We can see the average salary of our distribution is quite close to the one from the website, so we can say that our distribution closely resembles the sampled population from the site. Salary distribution looks like below:

```{r it_yearly_salary, message = FALSE}
it_sal_dist %>% 
  histogram() +
  labs(title = "Yearly Income Distribution",
       subtitle = "IT Workers") + 
  scale_x_continuous(labels = label_dollar(prefix = "", suffix = "RON"))
```

Not very normal, is it? There are a few people that have huge salaries compared to the rest of the population. So, if you manage to land yourself a management role in IT you're all set. If not, let's see how this translates in EURO and in lifetime earnings.

The first thing would be to transform everything into net profit.

At the time of this writing the IT workers were exempt from the income tax so the only two taxes required to be paid are:

-   Social Security: 25%
-   Health Insurance: 10%

Afterwards, we will convert it to Euro.

```{r it_sal_dist_net}
it_sal_dist_net <- it_sal_dist - (it_sal_dist * 0.25) - (it_sal_dist * 0.1)

it_sal_dist_net_eur <- it_sal_dist_net * 0.2
```

Now we have the yearly salary. So, for how long can someone work in this industry?

Most people start while studying at university, however most of those positions are either very low paying or are unpaid internships so I will eliminate them. On the other hand, due to this, most people can find work right after finishing their studies. Assuming as we did previously that someone finishes high school at 19, they can study for 3-4 years, depends if you are studying in the Bologna system or not, you can start work at 22. However, since there are a lot of people working in IT who do not have specialisations in IT, I will consider that the most typical person will start at 25. This will account for those people as most people not from IT might start later.

Considering that my goal is to retire at 65, I have 40 years of work ahead of me, so all I need to do is multiply everything by 40.

```{r it_sal_lifelong_income, message = FALSE}
it_sal_dist_net_eur <- it_sal_dist_net_eur * 40

it_sal_dist_net_eur %>% 
  histogram() +
  labs(title = "Lifelong Income Distribution",
       subtitle = "IT Workers")
```

This looks decent enough. Not as good as a doctors, however not bad at all. Now, I would like to take into account one more part.

What if I develop an app and make it big with it?

Honestly, I checked for relevant statistics regarding the success of an app. You can read a very interesting summary in this [article](https://venturebeat.com/2017/09/24/your-chances-of-making-a-successful-mobile-app-are-almost-nil/). From here and other sources it shows that to actually develop an app you need an initial investment of at least €25,000 and make it a full time job. Afterwards you need to invest in marketing and spend a lot of time adjusting ASO.

This is kinda outside the scope of what I want to do so I will not include it in my final outcome.

## Poker player

Now let's compute the outcome of ten thousand lives as a online poker player. For this we will need some additional information:

-   What is the probability to make it as an professional online poker player
-   How much or how little does an online poker player make in a year
-   How is that money distributed

These assumption can be estimated in multiple ways, although most of them are time consuming and the technical methods used are outside the scope of this article. However, I will briefly mention them if you are interested in such an endeavour.

[Statname.net](https://statname.net/) is one of the multiple sites that offer statistics regarding player earnings on different platforms and strategies. You can get the data from there on the earnings of a player, the number of hands and compute how much he would have earned if you account for the blinds. Then you can set a cut-off point in which an earning is considered a living wage and you can compute the percentage of professional players. This will be your probability. The same can go for the other measures.

Since getting the data can be a bit time consuming and this being just an example, I have decided to base my computations on the following [blog](https://www.blackrain79.com/). You can get a lot of useful information about online poker from here and I found it very useful, my understanding of poker being the as basic as it could be. From what I read here, and discussed this with people who know about the subject way more than I do, apparently one of the most successful strategies in online poker is to win blinds not large hands. The tables are also divided by the size of the blinds as follows:

-   NL2 (also known as 2NL) = ¢1 / ¢2 blinds
-   NL5 (also known as 5NL) = ¢2 / ¢5 blinds
-   NL10 (also known as 10NL) = ¢5 / ¢10 blinds
-   NL25 (also known as 25NL) = ¢10 / ¢25 blinds
-   NL50 (also known as 50NL) = ¢25 / ¢50 blinds
-   NL100 (also known as 100NL) = ¢50 / \$1 blinds

Now, how do we transform this into earnings? The formula is simple as seen below:

$$ (winning\_big\_blinds\_chance \times big\_blind\_value) \times \frac{played\_hands}{100}  $$

Let's compute some and example. From what I could gather a professional player will play around 100.000 hands a month. So from here on I will use this as the number of hands a professional player will play so we can estimate the winnings. With this in mind, let's see how much will a professional player make from a NL2 table with a 30% win rate. That will translate into the following formula:

$$ (30 \times 2) \times \frac{100000}{100} = ¢60000$$

We need to keep in mind that those are cents, adjusting to dollars, we see that you can earn around \$600 a month playing low stakes poker, which is not bad. We also need to take into account that people can play multiple tables online and apparently most people do. So the probabilities that I am going to use here can be found in this [blog post](https://www.blackrain79.com/2014/06/good-win-rates-for-micro-and-small_6.html) and are going to be just the ones for 1-8 tables since I already established that I will play around 100.000 hands a month so increasing the number of tables to 18+ cuts time but lower my attention and therefore the winning rate. If I want to maximise the number of hands, or increase the hourly payment I would increase the number of tables.

I will compute the average for each type of table, however I will transform the cents into dollars directly

$$ NL2   = (10 \times \frac{2}{100}) \times \frac{100000}{100} = \$`r (10 * 2/100) * 1000`$$

$$ NL5   = (6 \times \frac{5}{100}) \times \frac{100000}{100} = \$`r (6 * 5/100) * 1000`$$

$$ NL10  = (4 \times \frac{10}{100}) \times \frac{100000}{100} = \$`r (4 * 10/100) * 1000`$$

$$ NL25  = (3 \times \frac{25}{100}) \times \frac{100000}{100} = \$`r (3 * 25/100) * 1000`$$

$$ NL50  = (2 \times \frac{50}{100}) \times \frac{100000}{100} = \$`r (2 * 50/100) * 1000` $$

$$ NL100 = (2 \times 1) \times \frac{100000}{100} = \$`r (2 * 1) * 1000` $$

Now that we have some averages, I would like to see how much can the best players make using the same estimates from the articles.

$$ NL2   = (30 \times \frac{2}{100}) \times \frac{100000}{100} = \$`r (30 * 2/100) * 1000`$$

$$ NL5   = (10 \times \frac{5}{100}) \times \frac{100000}{100} = \$`r (18 * 5/100) * 1000`$$

$$ NL10  = (12 \times \frac{10}{100}) \times \frac{100000}{100} = \$`r (12 * 10/100) * 1000`$$

$$ NL25  = (10 \times \frac{25}{100}) \times \frac{100000}{100} = \$`r (10 * 25/100) * 1000`$$

$$ NL50  = (9 \times \frac{50}{100}) \times \frac{100000}{100} = \$`r (9  * 50/100) * 1000` $$

$$ NL100 = (8 \times 1) \times \frac{100000}{100} = \$`r (8 * 1) * 1000` $$

We can see that this is not anywhere near a normal distribution. By the definition of professional players, we know that they are the ones that actually earn enough so that they can survive of this income. This leaves us with a skewed distribution. I think we can safely assume that most professional players are average players and the elite that earn as much as we have shown here are a small percent 10%. With that said, we can start creating the population of online poker players.

Another assumption is that professional poker players will not spend all their time in NL2, NL5 and NL10 games, will most likely spend it on something that will provide more income. This is also consistent with the living wage assumption. I know \$750 might not seem much in a month for most Western democracies, however, it is quite a decent income in second and third world countries. So, how are we going to do this?

Simple, we will create two distributions that will reflect the average player and the elite player. The first one will be 90% of the population and the second one will be the other 10%

```{r}
avg_player <- rnorm(9000, 1400, 300)
elt_player <- rnorm(1000, 4000, 1000)
poker_players <- c(avg_player, elt_player)
```

```{r}
poker_players %>% 
  histogram() +
  labs(title = "Monthly Income Distribution",
       subtitle = "Professional Poker Players")
  
```

This distribution seems legit for a power law distribution. And now, for the final touch, we will need to add the 10% chance to become a professional player. We will do this by using the list we have created earlier. For this we will create a binomial distribution with a 10% probability and a size 1. Basically we can create a random string of values, either 1 or 0 and about 10% are one. Let's see it in practice.

```{r}
success_prob <- rbinom(n = 10000, size = 1, prob = 0.1)
print(sum(success_prob) / 10000)
```

Perfect, `r scales::percent_format(accuracy = 0.01)(sum(success_prob) / 10000)` is exactly what we would expect.

Now all we need to do is multiply the two lists. When a value in the second list is 0 it will transform the earnings to 0, so we did not make it as a professional poker player. When it is 1 the result will not be affected.

```{r}
poker_players_final <- poker_players * success_prob
```

Now that we painfully and to the best of our knowledge created the populations, let's proceed in analysing the data.
